(self.webpackChunkclient=self.webpackChunkclient||[]).push([[747],{747:function(e,t,i){var n=i(416).default,o=i(861).default,r=i(424).default,s=i(690).default,a=i(728).default;e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"Game",(function(){return X})),i.d(t,"moves",(function(){return Z})),i.d(t,"status",(function(){return ee})),i.d(t,"getFen",(function(){return te})),i.d(t,"move",(function(){return ie})),i.d(t,"aiMove",(function(){return ne}));var u=["A","B","C","D","E","F","G","H"],l=["1","2","3","4","5","6","7","8"],c={KING_W:"K",QUEEN_W:"Q",ROOK_W:"R",BISHOP_W:"B",KNIGHT_W:"N",PAWN_W:"P",KING_B:"k",QUEEN_B:"q",ROOK_B:"r",BISHOP_B:"b",KNIGHT_B:"n",PAWN_B:"p"},h="black",g="white",f=[0,1,2,3,4],p={0:1,1:2,2:2,3:3,4:3,5:4},v={0:2,1:2,2:4,3:4,4:5,5:5},C={fullMove:1,halfMove:0,enPassant:null,isFinished:!1,checkMate:!1,check:!1,turn:g},P=Object.assign({pieces:{E1:"K",D1:"Q",A1:"R",H1:"R",C1:"B",F1:"B",B1:"N",G1:"N",A2:"P",B2:"P",C2:"P",D2:"P",E2:"P",F2:"P",G2:"P",H2:"P",E8:"k",D8:"q",A8:"r",H8:"r",C8:"b",F8:"b",B8:"n",G8:"n",A7:"p",B7:"p",C7:"p",D7:"p",E7:"p",F7:"p",G7:"p",H7:"p"},castling:{whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}},C),y={UP:{A1:"A2",A2:"A3",A3:"A4",A4:"A5",A5:"A6",A6:"A7",A7:"A8",A8:null,B1:"B2",B2:"B3",B3:"B4",B4:"B5",B5:"B6",B6:"B7",B7:"B8",B8:null,C1:"C2",C2:"C3",C3:"C4",C4:"C5",C5:"C6",C6:"C7",C7:"C8",C8:null,D1:"D2",D2:"D3",D3:"D4",D4:"D5",D5:"D6",D6:"D7",D7:"D8",D8:null,E1:"E2",E2:"E3",E3:"E4",E4:"E5",E5:"E6",E6:"E7",E7:"E8",E8:null,F1:"F2",F2:"F3",F3:"F4",F4:"F5",F5:"F6",F6:"F7",F7:"F8",F8:null,G1:"G2",G2:"G3",G3:"G4",G4:"G5",G5:"G6",G6:"G7",G7:"G8",G8:null,H1:"H2",H2:"H3",H3:"H4",H4:"H5",H5:"H6",H6:"H7",H7:"H8",H8:null},DOWN:{A1:null,A2:"A1",A3:"A2",A4:"A3",A5:"A4",A6:"A5",A7:"A6",A8:"A7",B1:null,B2:"B1",B3:"B2",B4:"B3",B5:"B4",B6:"B5",B7:"B6",B8:"B7",C1:null,C2:"C1",C3:"C2",C4:"C3",C5:"C4",C6:"C5",C7:"C6",C8:"C7",D1:null,D2:"D1",D3:"D2",D4:"D3",D5:"D4",D6:"D5",D7:"D6",D8:"D7",E1:null,E2:"E1",E3:"E2",E4:"E3",E5:"E4",E6:"E5",E7:"E6",E8:"E7",F1:null,F2:"F1",F3:"F2",F4:"F3",F5:"F4",F6:"F5",F7:"F6",F8:"F7",G1:null,G2:"G1",G3:"G2",G4:"G3",G5:"G4",G6:"G5",G7:"G6",G8:"G7",H1:null,H2:"H1",H3:"H2",H4:"H3",H5:"H4",H6:"H5",H7:"H6",H8:"H7"},LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:"A1",B2:"A2",B3:"A3",B4:"A4",B5:"A5",B6:"A6",B7:"A7",B8:"A8",C1:"B1",C2:"B2",C3:"B3",C4:"B4",C5:"B5",C6:"B6",C7:"B7",C8:"B8",D1:"C1",D2:"C2",D3:"C3",D4:"C4",D5:"C5",D6:"C6",D7:"C7",D8:"C8",E1:"D1",E2:"D2",E3:"D3",E4:"D4",E5:"D5",E6:"D6",E7:"D7",E8:"D8",F1:"E1",F2:"E2",F3:"E3",F4:"E4",F5:"E5",F6:"E6",F7:"E7",F8:"E8",G1:"F1",G2:"F2",G3:"F3",G4:"F4",G5:"F5",G6:"F6",G7:"F7",G8:"F8",H1:"G1",H2:"G2",H3:"G3",H4:"G4",H5:"G5",H6:"G6",H7:"G7",H8:"G8"},RIGHT:{A1:"B1",A2:"B2",A3:"B3",A4:"B4",A5:"B5",A6:"B6",A7:"B7",A8:"B8",B1:"C1",B2:"C2",B3:"C3",B4:"C4",B5:"C5",B6:"C6",B7:"C7",B8:"C8",C1:"D1",C2:"D2",C3:"D3",C4:"D4",C5:"D5",C6:"D6",C7:"D7",C8:"D8",D1:"E1",D2:"E2",D3:"E3",D4:"E4",D5:"E5",D6:"E6",D7:"E7",D8:"E8",E1:"F1",E2:"F2",E3:"F3",E4:"F4",E5:"F5",E6:"F6",E7:"F7",E8:"F8",F1:"G1",F2:"G2",F3:"G3",F4:"G4",F5:"G5",F6:"G6",F7:"G7",F8:"G8",G1:"H1",G2:"H2",G3:"H3",G4:"H4",G5:"H5",G6:"H6",G7:"H7",G8:"H8",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:"A2",B2:"A3",B3:"A4",B4:"A5",B5:"A6",B6:"A7",B7:"A8",B8:null,C1:"B2",C2:"B3",C3:"B4",C4:"B5",C5:"B6",C6:"B7",C7:"B8",C8:null,D1:"C2",D2:"C3",D3:"C4",D4:"C5",D5:"C6",D6:"C7",D7:"C8",D8:null,E1:"D2",E2:"D3",E3:"D4",E4:"D5",E5:"D6",E6:"D7",E7:"D8",E8:null,F1:"E2",F2:"E3",F3:"E4",F4:"E5",F5:"E6",F6:"E7",F7:"E8",F8:null,G1:"F2",G2:"F3",G3:"F4",G4:"F5",G5:"F6",G6:"F7",G7:"F8",G8:null,H1:"G2",H2:"G3",H3:"G4",H4:"G5",H5:"G6",H6:"G7",H7:"G8",H8:null},DOWN_RIGHT:{A1:null,A2:"B1",A3:"B2",A4:"B3",A5:"B4",A6:"B5",A7:"B6",A8:"B7",B1:null,B2:"C1",B3:"C2",B4:"C3",B5:"C4",B6:"C5",B7:"C6",B8:"C7",C1:null,C2:"D1",C3:"D2",C4:"D3",C5:"D4",C6:"D5",C7:"D6",C8:"D7",D1:null,D2:"E1",D3:"E2",D4:"E3",D5:"E4",D6:"E5",D7:"E6",D8:"E7",E1:null,E2:"F1",E3:"F2",E4:"F3",E5:"F4",E6:"F5",E7:"F6",E8:"F7",F1:null,F2:"G1",F3:"G2",F4:"G3",F5:"G4",F6:"G5",F7:"G6",F8:"G7",G1:null,G2:"H1",G3:"H2",G4:"H3",G5:"H4",G6:"H5",G7:"H6",G8:"H7",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_RIGHT:{A1:"B2",A2:"B3",A3:"B4",A4:"B5",A5:"B6",A6:"B7",A7:"B8",A8:null,B1:"C2",B2:"C3",B3:"C4",B4:"C5",B5:"C6",B6:"C7",B7:"C8",B8:null,C1:"D2",C2:"D3",C3:"D4",C4:"D5",C5:"D6",C6:"D7",C7:"D8",C8:null,D1:"E2",D2:"E3",D3:"E4",D4:"E5",D5:"E6",D6:"E7",D7:"E8",D8:null,E1:"F2",E2:"F3",E3:"F4",E4:"F5",E5:"F6",E6:"F7",E7:"F8",E8:null,F1:"G2",F2:"G3",F3:"G4",F4:"G5",F5:"G6",F6:"G7",F7:"G8",F8:null,G1:"H2",G2:"H3",G3:"H4",G4:"H5",G5:"H6",G6:"H7",G7:"H8",G8:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},DOWN_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:null,B2:"A1",B3:"A2",B4:"A3",B5:"A4",B6:"A5",B7:"A6",B8:"A7",C1:null,C2:"B1",C3:"B2",C4:"B3",C5:"B4",C6:"B5",C7:"B6",C8:"B7",D1:null,D2:"C1",D3:"C2",D4:"C3",D5:"C4",D6:"C5",D7:"C6",D8:"C7",E1:null,E2:"D1",E3:"D2",E4:"D3",E5:"D4",E6:"D5",E7:"D6",E8:"D7",F1:null,F2:"E1",F3:"E2",F4:"E3",F5:"E4",F6:"E5",F7:"E6",F8:"E7",G1:null,G2:"F1",G3:"F2",G4:"F3",G5:"F4",G6:"F5",G7:"F6",G8:"F7",H1:null,H2:"G1",H3:"G2",H4:"G3",H5:"G4",H6:"G5",H7:"G6",H8:"G7"}},E=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,0,1,0,0,1,0,.5],[.5,0,0,-2,-2,0,0,.5],[0,0,0,0,0,0,0,0]],d=[[-4,-3,-2,-2,-2,-2,-3,-4],[-3,-2,0,0,0,0,-2,-3],[-2,0,1,1.5,1.5,1,0,-2],[-2,.5,1.5,2,2,1.5,.5,-2],[-2,0,1.5,2,2,1.5,0,-2],[-2,.5,1,1.5,1.5,1,.5,-2],[-3,-2,0,.5,.5,0,-2,-3],[-4,-3,-2,-2,-2,-2,-3,-4]],B=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],k=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],b=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],F=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],G={P:E.slice().reverse(),p:E,N:d.slice().reverse(),n:d,B:B.slice().reverse(),b:B,R:k.slice().reverse(),r:k,K:b.slice().reverse(),k:b,Q:F.slice().reverse(),q:F};function D(e){return y.UP[e]}function A(e){return y.DOWN[e]}function H(e){return y.LEFT[e]}function w(e){return y.RIGHT[e]}function m(e){return y.UP_LEFT[e]}function O(e){return y.UP_RIGHT[e]}function x(e){return y.DOWN_LEFT[e]}function M(e){return y.DOWN_RIGHT[e]}function L(e){var t=m(e);return t?D(t):null}function _(e){var t=m(e);return t?H(t):null}function S(e){var t=O(e);return t?D(t):null}function K(e){var t=O(e);return t?w(t):null}function j(e){var t=x(e);return t?A(t):null}function N(e){var t=x(e);return t?H(t):null}function T(e){var t=M(e);return t?A(t):null}function I(e){var t=M(e);return t?w(t):null}function U(e,t){return t===g?y.UP[e]:y.DOWN[e]}function W(e,t){return t===g?y.UP_LEFT[e]:y.DOWN_RIGHT[e]}function R(e,t){return t===g?y.UP_RIGHT[e]:y.DOWN_LEFT[e]}function Q(e,t){return t===g?y.DOWN_LEFT[e]:y.UP_RIGHT[e]}function q(e,t){return t===g?y.DOWN_RIGHT[e]:y.UP_LEFT[e]}function J(e){return{k:10,q:9,r:5,b:3,n:3,p:1}[e.toLowerCase()]||0}function V(e){return"string"==typeof e&&e.match("^[a-hA-H]{1}[1-8]{1}$")}var $=-1e3,Y=1e3,z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(JSON.stringify(P));if(s(this,e),"object"==typeof t)this.configuration=Object.assign({},C,t);else{if("string"!=typeof t)throw new Error("Unknown configuration type ".concat(typeof config,"."));this.configuration=Object.assign({},C,function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" "),t=r(e,6),i=t[0],n=t[1],o=t[2],s=t[3],a=t[4],c=t[5],f={pieces:Object.fromEntries(i.split("/").flatMap((function(e,t){var i=0;return e.split("").reduce((function(e,n){var o=n.match(/k|b|q|n|p|r/i);o&&(e.push(["".concat(u[i]).concat(l[7-t]),o[0]]),i+=1);var r=n.match(/[1-8]/);return r&&(i+=Number(r)),e}),[])})))};return f.turn="b"===n?h:g,f.castling={whiteLong:!1,whiteShort:!1,blackLong:!1,blackShort:!1},o.includes("K")&&(f.castling.whiteShort=!0),o.includes("k")&&(f.castling.blackShort=!0),o.includes("Q")&&(f.castling.whiteLong=!0),o.includes("q")&&(f.castling.blackLong=!0),V(s)&&(f.enPassant=s.toUpperCase()),f.halfMove=parseInt(a),f.fullMove=parseInt(c),f}(t))}this.configuration.castling||(this.configuration.castling={whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}),this.history=[]}return a(e,[{key:"getAttackingFields",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getPlayingColor(),t=[];for(var i in this.configuration.pieces){var n=this.getPiece(i);this.getPieceColor(n)===e&&(t=[].concat(o(t),o(this.getPieceMoves(n,i))))}return t}},{key:"isAttackingKing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getPlayingColor(),t=null;for(var i in this.configuration.pieces){var n=this.getPiece(i);if(this.isKing(n)&&this.getPieceColor(n)!==e){t=i;break}}return this.isPieceUnderAttack(t)}},{key:"isPieceUnderAttack",value:function(e){for(var t=this.getPieceOnLocationColor(e),i=this.getEnemyColor(t),n=!1,o=e,r=0;D(o)&&!n;){o=D(o),r++;var s=this.getPiece(o);if(s&&this.getPieceColor(s)===i&&(this.isRook(s)||this.isQueen(s)||this.isKing(s)&&1===r)&&(n=!0),s)break}for(o=e,r=0;A(o)&&!n;){o=A(o),r++;var a=this.getPiece(o);if(a&&this.getPieceColor(a)===i&&(this.isRook(a)||this.isQueen(a)||this.isKing(a)&&1===r)&&(n=!0),a)break}for(o=e,r=0;H(o)&&!n;){o=H(o),r++;var u=this.getPiece(o);if(u&&this.getPieceColor(u)===i&&(this.isRook(u)||this.isQueen(u)||this.isKing(u)&&1===r)&&(n=!0),u)break}for(o=e,r=0;w(o)&&!n;){o=w(o),r++;var l=this.getPiece(o);if(l&&this.getPieceColor(l)===i&&(this.isRook(l)||this.isQueen(l)||this.isKing(l)&&1===r)&&(n=!0),l)break}for(o=e,r=0;R(o,t)&&!n;){o=R(o,t),r++;var c=this.getPiece(o);if(c&&this.getPieceColor(c)===i&&(this.isBishop(c)||this.isQueen(c)||1===r&&(this.isKing(c)||this.isPawn(c)))&&(n=!0),c)break}for(o=e,r=0;W(o,t)&&!n;){o=W(o,t),r++;var h=this.getPiece(o);if(h&&this.getPieceColor(h)===i&&(this.isBishop(h)||this.isQueen(h)||1===r&&(this.isKing(h)||this.isPawn(h)))&&(n=!0),h)break}for(o=e,r=0;q(o,t)&&!n;){o=q(o,t),r++;var g=this.getPiece(o);if(g&&this.getPieceColor(g)===i&&(this.isBishop(g)||this.isQueen(g)||this.isKing(g)&&1===r)&&(n=!0),g)break}for(o=e,r=0;Q(o,t)&&!n;){o=Q(o,t),r++;var f=this.getPiece(o);if(f&&this.getPieceColor(f)===i&&(this.isBishop(f)||this.isQueen(f)||this.isKing(f)&&1===r)&&(n=!0),f)break}o=S(e);var p=this.getPiece(o);return p&&this.getPieceColor(p)===i&&this.isKnight(p)&&(n=!0),o=K(e),(p=this.getPiece(o))&&this.getPieceColor(p)===i&&this.isKnight(p)&&(n=!0),o=_(e),(p=this.getPiece(o))&&this.getPieceColor(p)===i&&this.isKnight(p)&&(n=!0),o=L(e),(p=this.getPiece(o))&&this.getPieceColor(p)===i&&this.isKnight(p)&&(n=!0),o=j(e),(p=this.getPiece(o))&&this.getPieceColor(p)===i&&this.isKnight(p)&&(n=!0),o=N(e),(p=this.getPiece(o))&&this.getPieceColor(p)===i&&this.isKnight(p)&&(n=!0),o=T(e),(p=this.getPiece(o))&&this.getPieceColor(p)===i&&this.isKnight(p)&&(n=!0),o=I(e),(p=this.getPiece(o))&&this.getPieceColor(p)===i&&this.isKnight(p)&&(n=!0),n}},{key:"hasPlayingPlayerCheck",value:function(){return this.isAttackingKing(this.getNonPlayingColor())}},{key:"hasNonPlayingPlayerCheck",value:function(){return this.isAttackingKing(this.getPlayingColor())}},{key:"getLowestValuePieceAttackingLocation",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getPlayingColor(),n=null,o=function(){var o=t.getPiece(r);t.getPieceColor(o)===i&&t.getPieceMoves(o,r).map((function(t){t===e&&(null===n||J(o)<n)&&(n=J(o))}))};for(var r in this.configuration.pieces)o();return n}},{key:"getMoves",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getPlayingColor(),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={},s=0;for(var a in this.configuration.pieces){var u=this.getPiece(a);if(this.getPieceColor(u)===i){var l=this.getPieceMoves(u,a);l.length&&s++,Object.assign(r,n({},a,l))}}var c=this.getAttackingFields(this.getNonPlayingColor());if(this.isLeftCastlingPossible(c)&&(this.isPlayingWhite()&&r.E1.push("C1"),this.isPlayingBlack()&&r.E8.push("C8")),this.isRightCastlingPossible(c)&&(this.isPlayingWhite()&&r.E1.push("G1"),this.isPlayingBlack()&&r.E8.push("G8")),o&&s>o)return r;var f={},p=function(i){r[i].map((function(n){var o=new e({pieces:Object.assign({},t.configuration.pieces),castling:Object.assign({},t.configuration.castling)});o.move(i,n),(t.isPlayingWhite()&&!o.isAttackingKing(h)||t.isPlayingBlack()&&!o.isAttackingKing(g))&&(f[i]||(f[i]=[]),f[i].push(n))}))};for(var v in r)p(v);return Object.keys(f).length||(this.configuration.isFinished=!0,this.hasPlayingPlayerCheck()&&(this.configuration.checkMate=!0)),f}},{key:"isLeftCastlingPossible",value:function(e){if(this.isPlayingWhite()&&!this.configuration.castling.whiteLong)return!1;if(this.isPlayingBlack()&&!this.configuration.castling.blackLong)return!1;var t=null;if(this.isPlayingWhite()&&"K"===this.getPiece("E1")&&"R"===this.getPiece("A1")&&!e.includes("E1")?t="E1":this.isPlayingBlack()&&"k"===this.getPiece("E8")&&"r"===this.getPiece("A8")&&!e.includes("E8")&&(t="E8"),!t)return!1;var i=H(t);return!this.getPiece(i)&&!e.includes(i)&&(i=H(i),!this.getPiece(i)&&!e.includes(i)&&(i=H(i),!this.getPiece(i)))}},{key:"isRightCastlingPossible",value:function(e){if(this.isPlayingWhite()&&!this.configuration.castling.whiteShort)return!1;if(this.isPlayingBlack()&&!this.configuration.castling.blackShort)return!1;var t=null;if(this.isPlayingWhite()&&"K"===this.getPiece("E1")&&"R"===this.getPiece("H1")&&!e.includes("E1")?t="E1":this.isPlayingBlack()&&"k"===this.getPiece("E8")&&"r"===this.getPiece("H8")&&!e.includes("E8")&&(t="E8"),!t)return!1;var i=w(t);return!this.getPiece(i)&&!e.includes(i)&&(i=w(i),!this.getPiece(i)&&!e.includes(i))}},{key:"getPieceMoves",value:function(e,t){return this.isPawn(e)?this.getPawnMoves(e,t):this.isKnight(e)?this.getKnightMoves(e,t):this.isRook(e)?this.getRookMoves(e,t):this.isBishop(e)?this.getBishopMoves(e,t):this.isQueen(e)?this.getQueenMoves(e,t):this.isKing(e)?this.getKingMoves(e,t):[]}},{key:"isPawn",value:function(e){return"P"===e.toUpperCase()}},{key:"isKnight",value:function(e){return"N"===e.toUpperCase()}},{key:"isRook",value:function(e){return"R"===e.toUpperCase()}},{key:"isBishop",value:function(e){return"B"===e.toUpperCase()}},{key:"isQueen",value:function(e){return"Q"===e.toUpperCase()}},{key:"isKing",value:function(e){return"K"===e.toUpperCase()}},{key:"getPawnMoves",value:function(e,t){var i=[],n=this.getPieceColor(e),o=U(t,n);return o&&!this.getPiece(o)&&(i.push(o),o=U(o,n),function(e,t){return e===g&&"2"===t[1]||e===h&&"7"===t[1]}(n,t)&&o&&!this.getPiece(o)&&i.push(o)),(o=W(t,n))&&(this.getPiece(o)&&this.getPieceOnLocationColor(o)!==n||o===this.configuration.enPassant)&&i.push(o),(o=R(t,n))&&(this.getPiece(o)&&this.getPieceOnLocationColor(o)!==n||o===this.configuration.enPassant)&&i.push(o),i}},{key:"getKnightMoves",value:function(e,t){var i=[],n=this.getPieceColor(e),o=S(t);return o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=K(t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=L(t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=_(t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=N(t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=j(t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=I(t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=T(t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),i}},{key:"getRookMoves",value:function(e,t){for(var i=[],n=this.getPieceColor(e),o=t;D(o);){o=D(o);var r=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),r)break}for(o=t;A(o);){o=A(o);var s=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),s)break}for(o=t;w(o);){o=w(o);var a=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),a)break}for(o=t;H(o);){o=H(o);var u=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),u)break}return i}},{key:"getBishopMoves",value:function(e,t){for(var i=[],n=this.getPieceColor(e),o=t;m(o);){o=m(o);var r=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),r)break}for(o=t;O(o);){o=O(o);var s=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),s)break}for(o=t;x(o);){o=x(o);var a=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),a)break}for(o=t;M(o);){o=M(o);var u=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),u)break}return i}},{key:"getQueenMoves",value:function(e,t){return[].concat(o(this.getRookMoves(e,t)),o(this.getBishopMoves(e,t)))}},{key:"getKingMoves",value:function(e,t){var i=[],n=this.getPieceColor(e),o=t;return(o=D(o))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=w(o=t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=A(o=t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=H(o=t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=m(o=t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=O(o=t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=x(o=t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),(o=M(o=t))&&this.getPieceOnLocationColor(o)!==n&&i.push(o),i}},{key:"getPieceColor",value:function(e){return e.toUpperCase()===e?g:h}},{key:"getPieceOnLocationColor",value:function(e){var t=this.getPiece(e);return t?t.toUpperCase()===t?g:h:null}},{key:"getPiece",value:function(e){return this.configuration.pieces[e]}},{key:"setPiece",value:function(e,t){if(!function(e){return Object.values(c).includes(e)}(t))throw new Error("Invalid piece "+t);if(!V(e))throw new Error("Invalid location "+e);this.configuration.pieces[e.toUpperCase()]=t}},{key:"removePiece",value:function(e){if(!V(e))throw new Error("Invalid location "+e);delete this.configuration.pieces[e.toUpperCase()]}},{key:"isEmpty",value:function(e){if(!V(e))throw new Error("Invalid location "+e);return!this.configuration.pieces[e.toUpperCase()]}},{key:"getEnemyColor",value:function(e){return e===g?h:g}},{key:"getPlayingColor",value:function(){return this.configuration.turn}},{key:"getNonPlayingColor",value:function(){return this.isPlayingWhite()?h:g}},{key:"isPlayingWhite",value:function(){return this.configuration.turn===g}},{key:"isPlayingBlack",value:function(){return this.configuration.turn===h}},{key:"addMoveToHistory",value:function(e,t){this.history.push({from:e,to:t,configuration:JSON.parse(JSON.stringify(this.configuration))})}},{key:"move",value:function(e,t){var i,o,r=this.getPiece(e),s=this.getPiece(t);if(!r)throw new Error("There is no piece at "+e);if(Object.assign(this.configuration.pieces,n({},t,r)),delete this.configuration.pieces[e],this.isPlayingWhite()&&this.isPawn(r)&&"8"===t[1]&&Object.assign(this.configuration.pieces,n({},t,"Q")),this.isPlayingBlack()&&this.isPawn(r)&&"1"===t[1]&&Object.assign(this.configuration.pieces,n({},t,"q")),this.isPawn(r)&&t===this.configuration.enPassant&&delete this.configuration.pieces[(i=t,o=this.getPlayingColor(),o===g?y.DOWN[i]:y.UP[i])],this.isPawn(r)&&this.isPlayingWhite()&&"2"===e[1]&&"4"===t[1]?this.configuration.enPassant=e[0]+"3":this.isPawn(r)&&this.isPlayingBlack()&&"7"===e[1]&&"5"===t[1]?this.configuration.enPassant=e[0]+"6":this.configuration.enPassant=null,"E1"===e&&Object.assign(this.configuration.castling,{whiteLong:!1,whiteShort:!1}),"E8"===e&&Object.assign(this.configuration.castling,{blackLong:!1,blackShort:!1}),"A1"===e&&Object.assign(this.configuration.castling,{whiteLong:!1}),"H1"===e&&Object.assign(this.configuration.castling,{whiteShort:!1}),"A8"===e&&Object.assign(this.configuration.castling,{blackLong:!1}),"H8"===e&&Object.assign(this.configuration.castling,{blackShort:!1}),this.isKing(r)){if("E1"===e&&"C1"===t)return this.move("A1","D1");if("E8"===e&&"C8"===t)return this.move("A8","D8");if("E1"===e&&"G1"===t)return this.move("H1","F1");if("E8"===e&&"G8"===t)return this.move("H8","F8")}this.configuration.turn=this.isPlayingWhite()?h:g,this.isPlayingWhite()&&this.configuration.fullMove++,this.configuration.halfMove++,(s||this.isPawn(r))&&(this.configuration.halfMove=0)}},{key:"exportJson",value:function(){return{moves:this.getMoves(),pieces:this.configuration.pieces,turn:this.configuration.turn,isFinished:this.configuration.isFinished,check:this.hasPlayingPlayerCheck(),checkMate:this.configuration.checkMate,castling:this.configuration.castling,enPassant:this.configuration.enPassant,halfMove:this.configuration.halfMove,fullMove:this.configuration.fullMove}}},{key:"calculateAiMove",value:function(e){return this.calculateAiMoves(e)[0]}},{key:"calculateAiMoves",value:function(e){var t=this;if(e=parseInt(e),!f.includes(e))throw new Error("Invalid level ".concat(e,". You can choose ").concat(f.join(",")));this.shouldIncreaseLevel()&&e++;var i=[],n=this.calculateScore(this.getPlayingColor()),o=this.getMoves(),r=function(r){o[r].map((function(o){var s=t.getTestBoard(),a=Boolean(s.getPiece(o));s.move(r,o),i.push({from:r,to:o,score:s.testMoveScores(t.getPlayingColor(),e,a,a?s.calculateScore(t.getPlayingColor()):n,o).score+s.calculateScoreByPiecesLocation(t.getPlayingColor())+Math.floor(Math.random()*(t.configuration.halfMove>10?t.configuration.halfMove-10:1)*10)/10})}))};for(var s in o)r(s);return i.sort((function(e,t){return e.score<t.score?1:e.score>t.score?-1:0})),i}},{key:"shouldIncreaseLevel",value:function(){return this.getIngamePiecesValue()<50}},{key:"getIngamePiecesValue",value:function(){var e=0;for(var t in this.configuration.pieces)e+=J(this.getPiece(t));return e}},{key:"getTestBoard",value:function(){return new e({pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling),turn:this.configuration.turn,enPassant:this.configuration.enPassant})}},{key:"testMoveScores",value:function(e,t,i,n,o){var r=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=null;if(s<v[t]&&this.hasPlayingPlayerCheck()?a=this.getMoves(this.getPlayingColor()):(s<p[t]||i&&s<v[t])&&(a=this.getMoves(this.getPlayingColor(),5)),this.configuration.isFinished)return{score:this.calculateScore(e)+(this.getPlayingColor()===e?s:-s),max:!0};if(!a)return null!==n?{score:n,max:!1}:{score:this.calculateScore(e),max:!1};var u=this.getPlayingColor()===e?$:Y,l=!1,c=function(i){l||a[i].map((function(o){if(!l){var a=r.getTestBoard(),c=Boolean(a.getPiece(o));if(a.move(i,o),!a.hasNonPlayingPlayerCheck()){var h=a.testMoveScores(e,t,c,c?a.calculateScore(e):n,o,s+1);h.max&&(l=!0),u=r.getPlayingColor()===e?Math.max(u,h.score):Math.min(u,h.score)}}}))};for(var h in a)c(h);return{score:u,max:!1}}},{key:"calculateScoreByPiecesLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getPlayingColor(),t={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7},i=0;for(var n in this.configuration.pieces){var o=this.getPiece(n);if(G[o]){var r=G[o][n[1]-1][t[n[0]]];i+=.5*(this.getPieceColor(o)===e?r:-r)}}return i}},{key:"calculateScore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getPlayingColor(),t=0;if(this.configuration.checkMate)return this.getPlayingColor()===e?$:Y;if(this.configuration.isFinished)return this.getPlayingColor()===e?Y:$;for(var i in this.configuration.pieces){var n=this.getPiece(i);this.getPieceColor(n)===e?t+=10*J(n):t-=10*J(n)}return t}}]),e}(),X=function(){function e(t){s(this,e),this.board=new z(t)}return a(e,[{key:"move",value:function(e,t){e=e.toUpperCase(),t=t.toUpperCase();var i=this.board.getMoves();if(!i[e]||!i[e].includes(t))throw new Error("Invalid move from ".concat(e," to ").concat(t," for ").concat(this.board.getPlayingColor()));return this.board.addMoveToHistory(e,t),this.board.move(e,t),n({},e,t)}},{key:"moves",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(e?this.board.getMoves()[e.toUpperCase()]:this.board.getMoves())||[]}},{key:"setPiece",value:function(e,t){this.board.setPiece(e,t)}},{key:"removePiece",value:function(e){this.board.removePiece(e)}},{key:"aiMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.board.calculateAiMove(e);return this.move(t.from,t.to)}},{key:"getHistory",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.board.history.reverse():this.board.history}},{key:"printToConsole",value:function(){!function(e){process.stdout.write("\n");var t=g;Object.assign([],l).reverse().map((function(i){process.stdout.write(""+i),u.map((function(n){switch(e.pieces["".concat(n).concat(i)]){case"K":process.stdout.write("\u265a");break;case"Q":process.stdout.write("\u265b");break;case"R":process.stdout.write("\u265c");break;case"B":process.stdout.write("\u265d");break;case"N":process.stdout.write("\u265e");break;case"P":process.stdout.write("\u265f");break;case"k":process.stdout.write("\u2654");break;case"q":process.stdout.write("\u2655");break;case"r":process.stdout.write("\u2656");break;case"b":process.stdout.write("\u2657");break;case"n":process.stdout.write("\u2658");break;case"p":process.stdout.write("\u2659");break;default:process.stdout.write(t===g?"\u2588":"\u2591")}t=t===g?h:g})),t=t===g?h:g,process.stdout.write("\n")})),process.stdout.write(" "),u.map((function(e){process.stdout.write(""+e)})),process.stdout.write("\n")}(this.board.configuration)}},{key:"exportJson",value:function(){return this.board.exportJson()}},{key:"exportFEN",value:function(){return function(e){var t="";Object.assign([],l).reverse().map((function(i){var n=0;i<8&&(t+="/"),u.map((function(o){var r=e.pieces["".concat(o).concat(i)];r?(n&&(t+=n.toString(),n=0),t+=r):n++})),t+=""+(n||"")})),t+=e.turn===g?" w ":" b ";var i=e.castling,n=i.whiteShort,o=i.whiteLong,r=i.blackLong,s=i.blackShort;return o||n||r||s?(n&&(t+="K"),o&&(t+="Q"),s&&(t+="k"),r&&(t+="q")):t+="-",t+=" "+(e.enPassant?e.enPassant.toLowerCase():"-"),t+=" "+e.halfMove,t+=" "+e.fullMove}(this.board.configuration)}}]),e}();function Z(e){if(!e)throw new Error("Configuration param required.");return new X(e).moves()}function ee(e){if(!e)throw new Error("Configuration param required.");return new X(e).exportJson()}function te(e){if(!e)throw new Error("Configuration param required.");return new X(e).exportFEN()}function ie(e,t,i){if(!e)throw new Error("Configuration param required.");var n=new X(e);return n.move(t,i),"object"==typeof e?n.exportJson():n.exportFEN()}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!e)throw new Error("Configuration param required.");var i=new X(e).board.calculateAiMove(t);return n({},i.from,i.to)}}])},897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports},372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},405:function(e,t,i){var n=i(897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},728:function(e,t,i){var n=i(62);function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}e.exports=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},416:function(e,t,i){var n=i(62);e.exports=function(e,t,i){return(t=n(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},872:function(e){e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],u=!0,l=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;u=!1}else for(;!(u=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(c){l=!0,o=c}finally{try{if(!u&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},424:function(e,t,i){var n=i(372),o=i(872),r=i(116),s=i(218);e.exports=function(e,t){return n(e)||o(e,t)||r(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,i){var n=i(405),o=i(498),r=i(116),s=i(281);e.exports=function(e){return n(e)||o(e)||r(e)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},36:function(e,t,i){var n=i(698).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},62:function(e,t,i){var n=i(698).default,o=i(36);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},116:function(e,t,i){var n=i(897);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=747.5b4cfd03.chunk.js.map